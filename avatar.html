<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Avatar 3D – rozbudowany humanoid</title>
  <style>
    body, html { margin:0; height:100%; overflow:hidden; background: #222; }
    canvas { display: block; }
  </style>
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
  <script>
    // Scena, kamera, renderer
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(50, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 2, 6);
    camera.lookAt(0, 1, 0);

    const renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Światła
    const dir = new THREE.DirectionalLight(0xffffff, 1);
    dir.position.set(5,10,7);
    scene.add(dir);
    scene.add(new THREE.AmbientLight(0x404040));

    // Materiał
    const mat = new THREE.MeshStandardMaterial({ color: 0x44aa88, flatShading:true });

    // Grupa avatara
    const avatar = new THREE.Group();

    // ----- TUŁÓW -----
    const torsoGeom = new THREE.BoxGeometry(1, 1.5, 0.5);
    const torso = new THREE.Mesh(torsoGeom, mat);
    torso.position.y = 1.0;
    avatar.add(torso);

    // ----- SZYJA -----
    const neckGeom = new THREE.CylinderGeometry(0.2,0.2,0.3,16);
    const neck = new THREE.Mesh(neckGeom, mat);
    neck.position.y = 1.9;
    avatar.add(neck);

    // ----- GŁOWA -----
    const headGeom = new THREE.SphereGeometry(0.4,32,32);
    const head = new THREE.Mesh(headGeom, mat);
    head.position.y = 2.4;
    avatar.add(head);

    // ----- RAMIONA -----
    function makeArm(side){
      const armGroup = new THREE.Group();
      // bark (kula)
      const shoulder = new THREE.Mesh(new THREE.SphereGeometry(0.15,16,16), mat);
      shoulder.position.set(side*0.7,1.6,0);
      armGroup.add(shoulder);
      // górna ręka
      const upper = new THREE.Mesh(new THREE.CylinderGeometry(0.12,0.12,0.8,12), mat);
      upper.position.set(side*0.7,1.2,0);
      upper.rotation.z = side * 0.2;
      armGroup.add(upper);
      // łokieć (kula)
      const elbow = new THREE.Mesh(new THREE.SphereGeometry(0.12,12,12), mat);
      elbow.position.set(side*0.3,0.8,0);
      armGroup.add(elbow);
      // przedramię
      const lower = new THREE.Mesh(new THREE.CylinderGeometry(0.1,0.1,0.8,12), mat);
      lower.position.set(side*0.3,0.4,0);
      lower.rotation.z = side * -0.1;
      armGroup.add(lower);
      return armGroup;
    }
    avatar.add(makeArm(-1)); // lewa
    avatar.add(makeArm(1));  // prawa

    // ----- NOGI -----
    function makeLeg(side){
      const legGroup = new THREE.Group();
      // biodro (kula)
      const hip = new THREE.Mesh(new THREE.SphereGeometry(0.18,16,16), mat);
      hip.position.set(side*0.3,0.25,0);
      legGroup.add(hip);
      // udo
      const upper = new THREE.Mesh(new THREE.CylinderGeometry(0.15,0.15,1,12), mat);
      upper.position.set(side*0.3,-0.5,0);
      legGroup.add(upper);
      // kolano
      const knee = new THREE.Mesh(new THREE.SphereGeometry(0.13,12,12), mat);
      knee.position.set(side*0.3,-1.1,0);
      legGroup.add(knee);
      // goleń
      const lower = new THREE.Mesh(new THREE.CylinderGeometry(0.12,0.12,1,12), mat);
      lower.position.set(side*0.3,-1.7,0);
      legGroup.add(lower);
      return legGroup;
    }
    avatar.add(makeLeg(-0.3)); // lewa
    avatar.add(makeLeg(0.3));  // prawa

    scene.add(avatar);

    // Animacja
    function animate(){
      requestAnimationFrame(animate);
      avatar.rotation.y += 0.005;
      renderer.render(scene, camera);
    }
    animate();

    // Responsywność
    window.addEventListener('resize',()=>{
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
